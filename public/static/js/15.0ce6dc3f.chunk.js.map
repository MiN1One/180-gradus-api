{"version":3,"sources":["UI/SubSpinner/SubSpinner.js","components/Card/Card.js","containers/Categories/Categories.js"],"names":["SubSpinner","className","Card","data","t","useTranslation","categoriesList","useSelector","state","categories","category","find","el","_id","categoryName","name","to","data-premium","exclusive","src","image","default","alt","device","width","height","type","Categories","mounted","useRef","useEffect","current","params","useParams","history","useHistory","useState","searchInput","setSearchInput","searchResults","setSearchResults","searchLoading","setSearchLoading","setData","fetchData","useCallback","categoryId","axiosInstance","then","devices","onInputSearch","search","e","preventDefault","cards","length","map","i","categoryItems","searchItems","cat","onMouseDown","push","findIndex","Error","notFound","onScroll","console","log","target","scrollHeight","scrollTop","clientHeight","alert","onSubmit","value","placeholder","onChange","onClick"],"mappings":"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","file":"static/js/15.0ce6dc3f.chunk.js","sourcesContent":["const SubSpinner = ({ className }) => (<div className={`loading ${className ? className : ''}`}></div>);\r\n\r\nexport default SubSpinner;","import { useTranslation } from 'react-i18next';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Card.scss';\r\n\r\nconst Card = ({ data }) => {\r\n    const { t } = useTranslation();\r\n    const categoriesList = useSelector(state => state.categories);\r\n\r\n    const category = data.category && categoriesList.find(el => el._id === data.category);\r\n    const categoryName = category && category.name;\r\n\r\n    return (\r\n        <Link \r\n            to={`/categories/skins/${data.category ? `${categoryName}/${data._id}` : data.name}`} \r\n            className=\"Card\"\r\n            data-premium={data.exclusive || false}>\r\n                <div className=\"Card__head\">\r\n                    <figure className=\"Card__figure\">\r\n                        <LazyLoadImage\r\n                            src={`/images/${data.image || data.default}`}\r\n                            alt={data.name || data.device}\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                            className=\"Card__img\" />\r\n                    </figure>\r\n                </div>\r\n                <div className=\"Card__body\">\r\n                    <span className=\"heading heading--sm tc\">{data.name ? t(`nav.${data.name}`) : data.device}</span>\r\n                    <span className=\"heading heading--sub mt-1 tc\">{t(`nav.${data.type}`)}</span>\r\n                </div>\r\n        </Link>\r\n    );\r\n};\r\n\r\nexport default Card;","import { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { BiSearch, BiX } from 'react-icons/bi';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\n\r\nimport Card from '../../components/Card/Card';\r\nimport axiosInstance from '../../axios';\r\nimport './Categories.scss';\r\nimport Error from '../../containers/Error/Error';\r\nimport SubSpinner from '../../UI/SubSpinner/SubSpinner';\r\n\r\nconst Categories = ({ categories }) => {\r\n\r\n    const mounted = useRef();\r\n    useEffect(() => {\r\n        mounted.current = true;\r\n        return () => mounted.current = false;\r\n    }, []);\r\n\r\n    const { t } = useTranslation();\r\n    const params = useParams();\r\n    const history = useHistory();\r\n    \r\n    const [searchInput, setSearchInput] = useState('');\r\n    const [searchResults, setSearchResults] = useState(null);\r\n    const [searchLoading, setSearchLoading] = useState(false);\r\n    const [data, setData] = useState(null);\r\n\r\n    const fetchData = useCallback(() => {\r\n        if (mounted.current) {\r\n            if (params.category) {\r\n                const categoryId = categories && categories.find(el => el.name === params.category);\r\n                categoryId && axiosInstance(`/categories/${categoryId._id}?project=devices`)\r\n                    .then(({ data }) => setData(data.data.data.devices));\r\n            } else axiosInstance('/skins').then(({ data }) => setData(data.data.data));\r\n        }\r\n    }, [categories, params.category]);\r\n    \r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [params.category, categories, fetchData]);\r\n\r\n    const handleScroll = (e) => {\r\n        console.log('dfv')\r\n        const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\r\n        if (bottom) {\r\n            alert('Hehe boay')\r\n        }\r\n    };\r\n\r\n    const onInputSearch = (search, e) => {\r\n\r\n        if (e) e.preventDefault();\r\n        setSearchLoading(true);\r\n\r\n        setSearchInput(search);\r\n\r\n        if (search !== '' && mounted.current) {\r\n            axiosInstance(`/skins?search=${search}`)\r\n                .then(({ data }) => {\r\n                    if (e) {\r\n                        setData(data.data.data);\r\n                        setSearchResults(null);\r\n                    } else setSearchResults(data.data.data);\r\n                    setSearchLoading(false);\r\n                });\r\n        }\r\n    };\r\n\r\n    const cards = (data && data.length > 0) && data.map((el, i) => (\r\n        <Card data={el} key={i} />\r\n    ));\r\n\r\n    const categoryItems = (categories && !params.category) && categories.map((el, i) => (\r\n        <Card data={el} key={i} />\r\n    ));\r\n    \r\n    const searchItems = searchResults && searchResults.map((el, i) => {\r\n        const category = categories && categories.find(cat => cat._id === el.category);\r\n\r\n        return (\r\n            <div className=\"input__drop-item\" key={i} onMouseDown={() => history.push(`/categories/skins/${category && category.name}/${el._id}`)}>\r\n                <figure className=\"input__figure\">\r\n                    <img className=\"img\" src={`/images/${el.default}`} alt={el.device} />\r\n                </figure>\r\n                <div className=\"flex fdc\">\r\n                    <span className=\"text--sm c-black\">{el.device}</span>\r\n                    <span className=\"text--xs c-grey\">{t(`nav.${el.type}`)}</span>\r\n                </div>\r\n            </div>\r\n        )\r\n    });\r\n\r\n    const catExists = (categories && params.category) && categories.findIndex((el) => el.name === params.category) !== -1;\r\n    if (!catExists && mounted.current && params.category) return <Error notFound />;\r\n\r\n    return (\r\n        <section className=\"Categories\" onScroll={handleScroll}>\r\n            <div className=\"container\">\r\n                <div className=\"Categories__head Categories__head--main\">\r\n                    <h1 className=\"heading heading--1 Categories__heading--main\">\r\n                        {params.category \r\n                            ? ((data && data.length > 0) && t(`nav.${params.category}`) )\r\n                            : t('nav.categories')\r\n                        }\r\n                    </h1>\r\n                    <form className=\"Categories__form\" onSubmit={(e) => onInputSearch(searchInput, e)}>\r\n                        <input \r\n                            className=\"input input--searchbar\" \r\n                            type=\"text\"\r\n                            value={searchInput}\r\n                            placeholder={t('main.search')}\r\n                            onChange={(e) => onInputSearch(e.target.value)} />\r\n                        <button type=\"submit\" className=\"Categories__search-btn\">\r\n                            <BiSearch className=\"icon icon--dark\" />\r\n                        </button>\r\n                        {searchInput && \r\n                            <div className=\"input__dropdown\">\r\n                                {searchLoading \r\n                                    ? <SubSpinner className=\"loading--sm\" />\r\n                                    : (searchItems && searchItems.length) ? searchItems : t('main.no results')\r\n                                }\r\n                            </div>\r\n                        }\r\n                        <button \r\n                            className=\"input--clear-btn\" \r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                                setSearchInput('');\r\n                                fetchData();\r\n                                setSearchResults(null);\r\n                            }}>\r\n                            <BiX className=\"icon icon--dark\" />\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n                <div className=\"Categories__body\">\r\n                    {!params.category &&\r\n                        <section className=\"Categories__group\">\r\n                            {categoryItems}\r\n                        </section>\r\n                    }\r\n                    <div className=\"Categories__head\">\r\n                        <h2 className=\"heading heading--main mr-1\">\r\n                            {params.category \r\n                                ? ((data && data.length > 0) && t('nav.popular'))\r\n                                : t(`nav.all ${params.type}`)\r\n                            }\r\n                        </h2>\r\n                    </div>\r\n                    {data && data.length > 0\r\n                        ? <section className=\"Categories__group pos-rel\">\r\n                            {cards}\r\n                        </section>\r\n                        : <div className=\"Categories__empty\">\r\n                            <h1 className=\"Categories__heading--grace\">\r\n                                {t(`nav.${params.category}`)}\r\n                            </h1>\r\n                            <h5 className=\"Categories__heading--sub\">\r\n                                {t('main.coming soon')}\r\n                            </h5>\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <div className=\"Categories__footer\">\r\n                    \r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Categories;"],"sourceRoot":""}