{"version":3,"sources":["UI/SubSpinner/SubSpinner.js","components/Card/Card.js","containers/Categories/Categories.js"],"names":["SubSpinner","className","Card","data","t","useTranslation","categoriesList","useSelector","state","categories","category","find","el","_id","categoryName","name","to","data-premium","exclusive","src","image","default","alt","device","width","height","type","React","memo","Categories","mounted","useRef","useEffect","current","params","useParams","history","useHistory","useState","searchInput","setSearchInput","searchResults","setSearchResults","searchLoading","setSearchLoading","loading","setLoading","setData","fetchData","useCallback","categoryId","axiosInstance","then","devices","onInputSearch","search","e","preventDefault","cards","length","map","i","categoryItems","searchItems","cat","onMouseDown","push","findIndex","Error","notFound","Spinner","onSubmit","value","placeholder","onChange","target","onClick"],"mappings":"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","file":"static/js/15.54846c6d.chunk.js","sourcesContent":["const SubSpinner = ({ className }) => (<div className={`loading ${className ? className : ''}`}></div>);\r\n\r\nexport default SubSpinner;","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Card.scss';\r\n\r\nconst Card = ({ data }) => {\r\n    const { t } = useTranslation();\r\n    const categoriesList = useSelector(state => state.categories);\r\n\r\n    const category = data.category && categoriesList.find(el => el._id === data.category);\r\n    const categoryName = category && category.name;\r\n\r\n    return (\r\n        <Link \r\n            to={`/categories/skins/${data.category ? `${categoryName}/${data._id}` : data.name}`} \r\n            className=\"Card\"\r\n            data-premium={data.exclusive || false}>\r\n                <div className=\"Card__head\">\r\n                    <figure className=\"Card__figure\">\r\n                        <LazyLoadImage\r\n                            src={`/images/${data.image || data.default}`}\r\n                            alt={data.name || data.device}\r\n                            width=\"100%\"\r\n                            height=\"100%\"\r\n                            className=\"Card__img\" />\r\n                    </figure>\r\n                </div>\r\n                <div className=\"Card__body\">\r\n                    <span className=\"heading heading--sm tc\">{data.name ? t(`nav.${data.name}`) : data.device}</span>\r\n                    <span className=\"heading heading--sub mt-1 tc\">{t(`nav.${data.type}`)}</span>\r\n                </div>\r\n        </Link>\r\n    );\r\n};\r\n\r\nexport default React.memo(Card);","import { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { BiSearch, BiX } from 'react-icons/bi';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\n\r\nimport Card from '../../components/Card/Card';\r\nimport axiosInstance from '../../axios';\r\nimport './Categories.scss';\r\nimport Error from '../../containers/Error/Error';\r\nimport SubSpinner from '../../UI/SubSpinner/SubSpinner';\r\nimport Spinner from '../../UI/Spinner/Spinner';\r\n\r\nconst Categories = ({ categories }) => {\r\n\r\n    const mounted = useRef();\r\n    useEffect(() => {\r\n        mounted.current = true;\r\n        return () => mounted.current = false;\r\n    }, []);\r\n\r\n    const { t } = useTranslation();\r\n    const params = useParams();\r\n    const history = useHistory();\r\n    \r\n    const [searchInput, setSearchInput] = useState('');\r\n    const [searchResults, setSearchResults] = useState(null);\r\n    const [searchLoading, setSearchLoading] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [data, setData] = useState(null);\r\n\r\n    const fetchData = useCallback(() => {\r\n        if (mounted.current) {\r\n            setLoading(true);\r\n            if (params.category) {\r\n                const categoryId = categories && categories.find(el => el.name === params.category);\r\n                categoryId && axiosInstance(`/categories/${categoryId._id}?project=devices`)\r\n                    .then(({ data }) => {\r\n                        setData(data.data.data.devices);\r\n                        setLoading(false);\r\n                    });\r\n            } else {\r\n                axiosInstance('/skins')\r\n                    .then(({ data }) => {\r\n                        setData(data.data.data);\r\n                        setLoading(false);\r\n                    });\r\n            }\r\n        }\r\n    }, [categories, params.category]);\r\n    \r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [params.category, categories, fetchData]);\r\n\r\n    // const handleScroll = (e) => {\r\n    //     const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\r\n    // };\r\n\r\n    const onInputSearch = (search, e) => {\r\n\r\n        if (e) e.preventDefault();\r\n        setSearchLoading(true);\r\n\r\n        setSearchInput(search);\r\n\r\n        if (search !== '' && mounted.current) {\r\n            axiosInstance(`/skins?search=${search}`)\r\n                .then(({ data }) => {\r\n                    if (e) {\r\n                        setData(data.data.data);\r\n                        setSearchResults(null);\r\n                    } else setSearchResults(data.data.data);\r\n                    setSearchLoading(false);\r\n                });\r\n        }\r\n    };\r\n\r\n    const cards = (data && data.length > 0) && data.map((el, i) => (\r\n        <Card data={el} key={el._id} />\r\n    ));\r\n\r\n    const categoryItems = (categories && !params.category) && categories.map((el, i) => (\r\n        <Card data={el} key={el._id} />\r\n    ));\r\n    \r\n    const searchItems = searchResults && searchResults.map((el, i) => {\r\n        const category = categories && categories.find(cat => cat._id === el.category);\r\n\r\n        return (\r\n            <div \r\n                className=\"input__drop-item\" key={el._id} \r\n                onMouseDown={() => history.push(`/categories/skins/${category && category.name}/${el._id}`)}>\r\n                    <figure className=\"input__figure\">\r\n                        <img className=\"img\" src={`/images/${el.default}`} alt={el.device} />\r\n                    </figure>\r\n                    <div className=\"flex fdc\">\r\n                        <span className=\"text--sm c-black\">{el.device}</span>\r\n                        <span className=\"text--xs c-grey\">{t(`nav.${el.type}`)}</span>\r\n                    </div>\r\n            </div>\r\n        )\r\n    });\r\n\r\n    const catExists = (categories && params.category) && categories.findIndex((el) => el.name === params.category) !== -1;\r\n    if (!catExists && mounted.current && params.category) return <Error notFound />;\r\n\r\n    if (loading)\r\n        return <Spinner />;\r\n\r\n    return (\r\n        <section className=\"Categories\">\r\n            <div className=\"container\">\r\n                <div className=\"Categories__head Categories__head--main\">\r\n                    <h1 className=\"heading heading--1 Categories__heading--main\">\r\n                        {params.category \r\n                            ? ((data && data.length > 0) && t(`nav.${params.category}`) )\r\n                            : t('nav.categories')\r\n                        }\r\n                    </h1>\r\n                    <form className=\"Categories__form\" onSubmit={(e) => onInputSearch(searchInput, e)}>\r\n                        <input \r\n                            className=\"input input--searchbar\" \r\n                            type=\"text\"\r\n                            value={searchInput}\r\n                            placeholder={t('main.search')}\r\n                            onChange={(e) => onInputSearch(e.target.value)} />\r\n                        <button type=\"submit\" className=\"Categories__search-btn\">\r\n                            <BiSearch className=\"icon icon--dark\" />\r\n                        </button>\r\n                        {searchInput && \r\n                            <div className=\"input__dropdown\">\r\n                                {searchLoading \r\n                                    ? <SubSpinner className=\"loading--sm\" />\r\n                                    : (searchItems && searchItems.length) ? searchItems : t('main.no results')\r\n                                }\r\n                            </div>\r\n                        }\r\n                        <button \r\n                            className=\"input--clear-btn\" \r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                                setSearchInput('');\r\n                                fetchData();\r\n                                setSearchResults(null);\r\n                            }}>\r\n                            <BiX className=\"icon icon--dark\" />\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n                <div className=\"Categories__body\">\r\n                    {!params.category &&\r\n                        <section className=\"Categories__group\">\r\n                            {categoryItems}\r\n                        </section>\r\n                    }\r\n                    <div className=\"Categories__head\">\r\n                        <h2 className=\"heading heading--main mr-1\">\r\n                            {params.category \r\n                                ? ((data && data.length > 0) && t('nav.popular'))\r\n                                : t(`nav.all ${params.type}`)\r\n                            }\r\n                        </h2>\r\n                    </div>\r\n                    {data && data.length > 0\r\n                        ? <section className=\"Categories__group pos-rel\">\r\n                            {cards}\r\n                        </section>\r\n                        : <div className=\"Categories__empty\">\r\n                            <h1 className=\"Categories__heading--grace\">\r\n                                {t(`nav.${params.category}`)}\r\n                            </h1>\r\n                            <h5 className=\"Categories__heading--sub\">\r\n                                {t('main.coming soon')}\r\n                            </h5>\r\n                        </div>\r\n                    }\r\n                </div>\r\n                {/* <div className=\"Categories__footer\">\r\n                    \r\n                </div> */}\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Categories;"],"sourceRoot":""}